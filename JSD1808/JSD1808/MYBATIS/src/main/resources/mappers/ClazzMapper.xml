<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!-- namespace：映射的接口的全名 -->
<mapper namespace="cn.tedu.mybatis.mapper.ClazzMapper">
	<!-- resultMap：指导MyBatis将查询结果封装到对象中 -->
	<!-- id：节点的唯一标识 -->
	<!-- type：数据类型 -->
	<resultMap id="ClazzVoMap" type="cn.tedu.mybatis.vo.ClazzVO">
		<!-- id节点：主键的配置 -->
		<!-- column：查询结果的列名 -->
		<!-- property：数据类型的属性名 -->
		<id column="cls_id" property="classId" />
		<!-- 其它结果的配置 -->
		<result column="cls_name" property="className" />
		<!-- collection：配置List集合 -->
		<!-- ofType：集合中放的哪种类型的数据 -->
		<collection property="student" ofType="cn.tedu.mybatis.entity.Student">
			<!-- 自此开始，property表示User中的属性名 -->
			<id column="stu_id" property="id" />
			<result column="stu_7name" property="name" />
			<result column="age" property="age" />
			<result column="class_id" property="class_id" />
		</collection>
	</resultMap>
	
	<select id="findById" resultMap="ClazzVoMap">
		SELECT 
			t_class.id AS cls_id,t_class.name AS cls_name,
			t_student.id AS stu_id,t_student.name stu_name,age,class_id
		FROM
			t_class
		INNER JOIN
			t_student
		ON
			t_class.id=t_student.class_id
		WHERE 
			t_class.id=#{id}
	</select>
</mapper>


